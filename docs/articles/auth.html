<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Obtaining and using access tokens • rtweet</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">rtweet</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/auth.html">Obtaining and using access tokens</a>
    </li>
    <li>
      <a href="../articles/intro.html">Intro to rtweet: Collecting Twitter Data</a>
    </li>
    <li>
      <a href="../articles/stream.html">Live streaming tweets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Obtaining and using access tokens</h1>
            <h3 class="subtitle">rtweet: Collecting Twitter Data</h3>
            
          </div>

    
    
<div class="contents">
<div id="rtweet" class="section level2">
<h2 class="hasAnchor">
<a href="#rtweet" class="anchor"></a>rtweet</h2>
<p>This vignette covers how to obtain and use Twitter API access tokens for use in the <code>rtweet</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install from CRAN</span>
<span class="kw">install.packages</span>(<span class="st">"rtweet"</span>)

<span class="co"># load rtweet</span>
<span class="kw">library</span>(rtweet)</code></pre></div>
</div>
<div id="creating-a-twitter-app" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-twitter-app" class="anchor"></a>Creating a Twitter App</h2>
<ul>
<li>To create a Twitter app, navigate to <a href="https://apps.twitter.com/">apps.twitter.com</a> and create a new app by providing a <code>Name</code>, <code>Description</code>, and <code>Website</code> of your choosing (example screenshot provided below).</li>
<li>
<strong>Important</strong> In the <code>Callback URL</code> field, make sure to enter the following: <code>http://127.0.0.1:1410</code>
</li>
<li>Check yes if you agree and then click “Create your Twitter application”.</li>
</ul>
<p align="center">
<img src="files/creating.png" alt="creating"></p>
<ul>
<li>Once you’ve successfully created an app, click the tab labeled <code>Keys and Access Tokens</code> to retrieve your consumer (api) and secret keys.</li>
</ul>
<p align="center">
<img src="files/created.png" alt="created"></p>
<ul>
<li><p>To create a personal access token, users must provide their <code>Consumer Key</code> (aka “API Key”) and <code>Consumer Secret</code> (aka “API Secret”).</p></li>
<li><p>I’ve highlighted the keys in the screen shot below.</p></li>
</ul>
<p align="center">
<img src="files/keys.png" alt="keys"></p>
<ul>
<li><p>Copy and paste these keys into an R script file and assign them to objects like I’ve done in the code below.</p></li>
<li><p>Once the keys are read into R, use <code><a href="../reference/create_token.html">create_token()</a></code> and store the output as <code>twitter_token</code>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## whatever name you assigned to your created app
appname &lt;-<span class="st"> "rtweet_token"</span>

## api key (example below is not a real key)
key &lt;-<span class="st"> "XYznzPFOFZR2a39FwWKN1Jp41"</span>

## api secret (example below is not a real key)
secret &lt;-<span class="st"> "CtkGEWmSevZqJuKl6HHrBxbCybxI1xGLqrD5ynPd9jG0SoHZbD"</span>

## create token named "twitter_token"
twitter_token &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_token.html">create_token</a></span>(
  <span class="dt">app =</span> appname,
  <span class="dt">consumer_key =</span> key,
  <span class="dt">consumer_secret =</span> secret)</code></pre></div>
<p><em>NOTE</em>: Following the steps outlined above, it’s possible to create <em>multiple</em> Twitter apps, resulting in multiple tokens. Twitter discourages abusing their API rate limits (these are like speed limits, regulating the amount of requests you can make within a given period of time). Abusing Twitter rate limits can even result in Twitter completely revoking your API access. However, Twitter does allow users multiple tokens so long as each token is used for a unique purpose..</p>
</div>
<div id="saving-tokens" class="section level2">
<h2 class="hasAnchor">
<a href="#saving-tokens" class="anchor"></a>Saving tokens</h2>
<ul>
<li><p>At this point, you technically have enough to start using <code>rtweet</code> functions—you’d just need to set the <code>token</code> argument equal to <code>twitter_token</code> (the token object we just created).</p></li>
<li><p>Rather than creating a token every time you open R, remembering where you saved your token(s) or passwords, and specifying a token every time you use a function, users are encouraged to save tokens as an environment variable.</p></li>
<li><p>To save a personal access token as an environment variable, save the <code>twitter_token</code> object created earlier in your computer’s home directory (to locate your home directory, you can enter <code>normalizePath("~/")</code> into your R console, or follow the directions below for what I think is the easiest method).</p></li>
<li><p>Use <code>saveRDS()</code> to save <code>twitter_token</code> to your home directory. The code below should locate and construct the path to your home directory for you. Assuming you’ve saved your token as <code>twitter_token</code>, the final line in the code below will save your token for you as well.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## path of home directory
home_directory &lt;-<span class="st"> </span><span class="kw">path.expand</span>(<span class="st">"~/"</span>)

## combine with name for token
file_name &lt;-<span class="st"> </span><span class="kw">file.path</span>(home_directory, <span class="st">"twitter_token.rds"</span>)

## save token to home directory
<span class="kw">saveRDS</span>(twitter_token, <span class="dt">file =</span> file_name)</code></pre></div>
<ul>
<li>The last step is to create an environment variable that points to the saved twitter token. This makes sure that the token will be read and available to use every time you start R.</li>
</ul>
</div>
<div id="environment-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#environment-variable" class="anchor"></a>Environment variable</h2>
<ul>
<li><p>Create a plain text file containing the path to your token object and save it to your home directory as “.Renviron”.</p></li>
<li><p>To create a plain text file in R, modify the code below. Change <code>TWITTER_PAT</code> location to match the path you used earlier (in the example below, you’d want to change “/Users/mwk/twitter_token.rds”). You can also create a plain text document in any text editor like TextEdit or Notepad. If you’re using Rstudio, select File &gt; New File &gt; Text File.</p></li>
<li><p><strong>Important</strong>: Make sure the last line of “.Renviron” is blank. I achieved this in the code below by including <code>fill = TRUE</code> in the <code>cat</code> function.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## On my mac, the .Renviron text looks like this:
##     TWITTER_PAT=/Users/mwk/twitter_token.rds

## assuming you followed the procodures to create "file_name"
##     from the previous code chunk, then the code below should
##     create and save your environment variable.
<span class="kw">cat</span>(<span class="kw">paste0</span>(<span class="st">"TWITTER_PAT="</span>, file_name),
    <span class="dt">file =</span> <span class="kw">file.path</span>(home_directory, <span class="st">".Renviron"</span>),
    <span class="dt">append =</span> <span class="ot">TRUE</span>)</code></pre></div>
<ul>
<li><p>Restart R so it can process the environment variable.</p></li>
<li><p>If you completed the steps successfully, you should be able to use <code>rtweet</code> functions without specifying [or even <em>thinking</em> about] tokens [ever again].</p></li>
</ul>
<p>That’s it!</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#rtweet">rtweet</a></li>
      <li><a href="#creating-a-twitter-app">Creating a Twitter App</a></li>
      <li><a href="#saving-tokens">Saving tokens</a></li>
      <li><a href="#environment-variable">Environment variable</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michael W. Kearney.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
